---
title: 生成器和迭代器
date: 2019-05-18 19:02:54
tags:
- Python
- 生成器
- 迭代器
categories:
- Python
---
To understand what yield does, you must understand what generators are. And before you can understand generators, you must understand iterables.

Iterables
When you create a list, you can read its items one by one. Reading its items one by one is called iteration:
```Python
>>> mylist = [1, 2, 3]
>>> for i in mylist:
...    print(i)
1
2
3
```
mylist is an iterable. When you use a list comprehension, you create a list, and so an iterable:
```Python
>>> mylist = [x*x for x in range(3)]
>>> for i in mylist:
...    print(i)
0
1
4
```
Everything you can use "for... in..." on is an iterable; lists, strings, files...

These iterables are handy because you can read them as much as you wish, but you store all the values in memory and this is not always what you want when you have a lot of values.

Generators
Generators are iterators, a kind of iterable you can only iterate over once. Generators do not store all the values in memory, they generate the values on the fly:
```Python
>>> mygenerator = (x*x for x in range(3))
>>> for i in mygenerator:
...    print(i)
0
1
4
```
It is just the same except you used () instead of []. BUT, you cannot perform for i in mygenerator a second time since generators can only be used once: they calculate 0, then forget about it and calculate 1, and end calculating 4, one by one.

Yield
yield is a keyword that is used like return, except the function will return a generator.
```Python
>>> def createGenerator():
...    mylist = range(3)
...    for i in mylist:
...        yield i*i
...
>>> mygenerator = createGenerator() # create a generator
>>> print(mygenerator) # mygenerator is an object!
<generator object createGenerator at 0xb7555c34>
>>> for i in mygenerator:
...     print(i)
0
1
4
```
Here it's a useless example, but it's handy when you know your function will return a huge set of values that you will only need to read once.

To master yield, you must understand that when you call the function, the code you have written in the function body does not run. The function only returns the generator object, this is a bit tricky.

参考:[What does the “yield” keyword do?](https://github.com/taizilongxu/interview_python#3-staticmethod%E5%92%8Cclassmethod)

作为stackoverflow中Python排名第一的问题，阅读一遍原文应该比看一遍生硬的英文翻译更加有意义吧，看不懂只能补习一下英语喽。